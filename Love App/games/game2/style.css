:root{
  --bg1:#0a0f2c; --bg2:#1f2947;
  --accent:rgba(0,217,255,1);
  --accent-2:rgba(140,86,255,1);
  --glass:rgba(255,255,255,0.03);
  --ui-radius:14px;
  --glow:0 10px 40px rgba(0,217,255,0.12);
  --twinkle: rgba(255,255,255,0.85);
}

/* reset / base */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
  background:linear-gradient(145deg,var(--bg1),var(--bg2));
  color:#d9f7ff;
  overflow-x:hidden;
}

/* background canvases */
.bg-canvas{position:fixed;inset:0;z-index:0;pointer-events:none;display:block}
.wave-canvas{z-index:0; opacity:0.42; filter:blur(22px)}
.twinkles-canvas{z-index:5}
.particles-canvas{z-index:8; opacity:0.9}

/* container */
.app-wrap{position:relative;z-index:20;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:12px}

/* main card */
.garden-card{
  width:980px;
  max-width:100%;
  height:720px;
  border-radius:18px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow:var(--glow);
  display:grid;
  grid-template-columns: 1fr 320px;
  gap:12px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.03);
  padding:12px;
}

/* left side */
.garden-view{display:flex;flex-direction:column;gap:10px;padding:10px}

/* header */
.title-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
h1{font-family:'Great Vibes';font-size:40px;color:var(--accent);text-shadow:0 8px 30px rgba(0,217,255,0.06);margin:0}
.counters{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.counter{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);font-weight:700;font-size:14px}

/* garden area - holds soil and plot grid */
.garden-area{flex:1;position:relative;border-radius:12px;overflow:hidden;display:flex;flex-direction:column;padding:6px}

/* soil background */
.soil{
  position:absolute;left:0;right:0;top:0;bottom:0;
  background:
    repeating-linear-gradient(90deg, rgba(0,0,0,0.06) 0 2px, rgba(255,255,255,0.01) 2px 4px),
    linear-gradient(180deg,#082034,#0c2340);
  padding:12px;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* PLOT GRID: ALWAYS 5 columns and 2 rows (10 slots). They will stretch to fill the area */
.plot-grid{
  position:relative;
  width:100%;
  height:100%;
  max-height:100%;
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap:10px;
  /* ensure grid fills container (no leftover space) */
  align-content: stretch;
  justify-items: stretch;
  align-items: stretch;
  z-index: 5; /* above soil */
}

/* Each plot will stretch to fill its grid cell */
.plot{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:100%;
  background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.01));
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.02);
  position:relative;
  padding:6px;
  box-sizing:border-box;
}

/* overlay & actions (buttons) — buttons should not stretch */
.plot .overlay{position:absolute;inset:6px;border-radius:8px;display:flex;align-items:flex-start;justify-content:flex-end;padding:6px;pointer-events:none}
.plot .actions{pointer-events:auto;display:flex;flex-direction:column;gap:6px;align-items:flex-end;min-width:0}

/* Make action buttons intrinsic size (no stretch) */
.plot .actions button,
.glow-btn {
  width:auto;
  min-width:72px;
  padding:6px 10px;
  white-space:nowrap;
  font-weight:800;
  border-radius:10px;
  border:none;
  cursor:pointer;
}

/* plant visuals scaled smaller so they fit */
.plant-stage{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);text-align:center}
.plant-pot{width:56px;height:28px;border-radius:10px;background:linear-gradient(180deg,#3b241c,#6b3f2e);box-shadow:0 6px 18px rgba(0,0,0,0.5);border:2px solid rgba(255,255,255,0.03)}
.plant-sprout{width:5px;height:36px;background:linear-gradient(180deg,var(--accent-2),var(--accent));margin:0 auto;border-radius:6px}
.plant-leaves{width:88px;height:56px;position:relative;margin-top:-40px}
.leaf{position:absolute;bottom:0;width:44px;height:30px;background:linear-gradient(180deg,var(--accent),#7ae1ff);border-radius:50% 50% 10% 50%;filter:drop-shadow(0 8px 18px rgba(0,217,255,0.06))}
.leaf.l1{left:0;transform:rotate(-26deg)} .leaf.l2{right:0;transform:rotate(26deg)}
.bloom{width:22px;height:22px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #fff, var(--accent));box-shadow:0 8px 22px rgba(0,217,255,0.24);margin:0 auto;margin-top:-16px}

/* SHOP / side — keep visible on desktop, overlay on mobile */
.shop-side{padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));display:flex;flex-direction:column;gap:10px}
.shop-header{font-weight:800;color:var(--accent);font-size:18px}
.glow-btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#00121a;box-shadow:0 10px 30px rgba(0,217,255,0.12);}

/* Shop panel overlay (desktop small slide-in) */
.shop-panel{
  position:fixed; right:12px; top:12px; width:320px; height:calc(100vh - 24px); border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:12px; box-shadow:var(--glow); z-index:60; transform:translateX(110%); transition:transform .28s ease;
  overflow:hidden;
}
.shop-panel.open{transform:translateX(0)}
.shop-items{display:flex;flex-direction:column;gap:8px;overflow:auto;padding-right:6px;max-height: calc(100% - 72px)}
.shop-item{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);gap:8px}
.shop-item .buy{flex: none; min-width:72px}

/* small toasts / messages */
.pulse-msg{position:fixed;left:50%;transform:translateX(-50%);bottom:110px;background:linear-gradient(90deg,var(--accent),var(--accent-2));padding:8px 12px;border-radius:10px;color:#00121a;font-weight:800;z-index:90}

/* corner buttons remain intrinsic size */
.corner-btn{position:fixed;z-index:70;border-radius:999px;border:none;padding:12px 14px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#00121a;font-weight:800;box-shadow:var(--glow);cursor:pointer;font-size:13px}
.corner-btn.back{left:12px;bottom:12px} .corner-btn.shop{right:12px;bottom:12px}

/* ===========================
   RESPONSIVE SCALE (phones)
   =========================== */

/* Keep the 5x2 grid intact but scale the whole card down.
   We scale card width and height, and shrink inner paddings and fonts so
   the 10 plots fill the available mobile screen without empty space. */

@media (max-width: 1024px){
  .garden-card{ width:92vw; height:640px; grid-template-columns: 1fr 260px; padding:10px; }
  h1{font-size:34px}
  .counter{font-size:13px;padding:5px 8px}
  .plot-grid{gap:9px}
  .plot{padding:5px}
  .plant-pot{width:50px;height:26px}
  .plant-leaves{width:76px;height:50px;margin-top:-36px}
  .shop-panel{ width:280px; right:8px; top:8px; height:calc(100vh - 16px); padding:10px }
  .corner-btn{padding:10px 12px;font-size:12px}
}

@media (max-width: 760px){
  /* single-column card but keep grid 5x2 and force grid to fill height */
  .garden-card{ width:96vw; height:520px; grid-template-columns: 1fr; grid-auto-rows: auto; padding:8px; }
  .shop-side{display:none} /* hide side area; use shop-panel overlay */
  .garden-view{padding:8px}
  h1{font-size:30px}
  .plot-grid{height:82%; gap:8px} /* reserve nearly full vertical space for plots */
  .plot{height:auto} /* each cell fills row fraction */
  .plant-pot{width:44px;height:24px}
  .plant-leaves{width:66px;height:44px;margin-top:-30px}
  .shop-panel{ width:100%; height:100vh; top:0; right:0; left:0; border-radius:0; padding:12px; }
  .shop-items{max-height:calc(100vh - 120px)}
}

@media (max-width: 420px){
  .garden-card{ height:460px; padding:6px }
  h1{font-size:26px}
  .counter{font-size:12px;padding:4px 6px}
  .plot-grid{gap:6px}
  .plant-pot{width:36px;height:20px}
  .plant-leaves{width:56px;height:36px;margin-top:-24px}
  .glow-btn{font-size:12px;padding:6px 8px}
  .shop-panel{padding:10px}
  .corner-btn{padding:8px 10px;font-size:12px}
}

/* final fallback to ensure no horizontal scroll bump */
@media (max-width:360px){
  .garden-card{ width:98vw; height:420px }
  .plot-grid{gap:5px}
  .plot{padding:4px}
  .plant-pot{width:32px;height:18px}
}